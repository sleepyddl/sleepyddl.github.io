{"version":3,"sources":["webpack:///./src/views/admin/Mkfile.vue?2a46","webpack:///./src/views/admin/Mkfile.vue","webpack:///src/views/admin/Mkfile.vue","webpack:///./src/views/admin/Mkfile.vue?d63c","webpack:///./src/views/admin/Mkfile.vue?9949"],"names":["render","_vm","this","_c","_self","attrs","staticClass","directives","name","rawName","value","title","expression","domProps","on","$event","target","composing","menu","_q","_v","submit","des","ref","$imgAdd","model","content","callback","$$v","staticRenderFns","data","id","$route","query","console","log","article","getarticlesdetail","Object","assign","methods","pos","$file","formdata","FormData","append","uploadimg","then","url","$refs","md","$img2Url","baseUrl","imgSrc","posttime","Date","getTime","postArticle","res","type","Notification","message","onClose","$router","push","Message","watch","component"],"mappings":"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","file":"js/chunk-1710d9aa.cf4af414.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=style&index=0&id=22cd672c&prod&lang=less&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"markdown\"}},[_c('div',{staticClass:\"articleTitle\"},[_c('div',{staticClass:\"form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],staticClass:\"title\",attrs:{\"type\":\"text\",\"placeholder\":\"文章标题\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing)return;_vm.title=$event.target.value}}}),_c('div',{staticClass:\"menu\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.menu),expression:\"menu\"}],attrs:{\"type\":\"radio\",\"id\":\"life\",\"value\":\"life\"},domProps:{\"checked\":_vm._q(_vm.menu,\"life\")},on:{\"change\":function($event){_vm.menu=\"life\"}}}),_c('label',{attrs:{\"for\":\"life\"}},[_vm._v(\"life\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.menu),expression:\"menu\"}],attrs:{\"type\":\"radio\",\"id\":\"code\",\"value\":\"code\"},domProps:{\"checked\":_vm._q(_vm.menu,\"code\")},on:{\"change\":function($event){_vm.menu=\"code\"}}}),_c('label',{attrs:{\"for\":\"code\"}},[_vm._v(\"code\")])]),_c('div',{staticClass:\"submit\",on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.des),expression:\"des\"}],attrs:{\"placeholder\":\"文章简介\"},domProps:{\"value\":(_vm.des)},on:{\"input\":function($event){if($event.target.composing)return;_vm.des=$event.target.value}}})]),_c('mavon-editor',{ref:\"md\",staticClass:\"editor\",on:{\"imgAdd\":_vm.$imgAdd},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"markdown\">\r\n    <div class=\"articleTitle\">\r\n      <div class=\"form\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"title\"\r\n          placeholder=\"文章标题\"\r\n          v-model=\"title\"\r\n        />\r\n        <div class=\"menu\">\r\n          <input type=\"radio\" id=\"life\" value=\"life\" v-model=\"menu\" />\r\n          <label for=\"life\">life</label>\r\n          <input type=\"radio\" id=\"code\" value=\"code\" v-model=\"menu\" />\r\n          <label for=\"code\">code</label>\r\n        </div>\r\n        <div class=\"submit\" @click=\"submit\">提交</div>\r\n      </div>\r\n      <textarea placeholder=\"文章简介\" v-model=\"des\"></textarea>\r\n    </div>\r\n    <mavon-editor v-model=\"content\" class=\"editor\" ref=\"md\" @imgAdd=\"$imgAdd\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  uploadimg,\r\n  baseUrl,\r\n  postArticle,\r\n  getarticlesdetail,\r\n} from \"@/request/api.js\";\r\nimport axios from \"axios\";\r\nimport { Message, Notification } from \"element-ui\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      menu: \"\",\r\n      content: \"#\",\r\n      des: \"\",\r\n      title: \"\",\r\n      id: 0,\r\n    };\r\n  },\r\n  async created() {\r\n    let id = this.$route.query.id;\r\n    console.log(id);\r\n    if (id) {\r\n      let article = await getarticlesdetail(id);\r\n      Object.assign(this, article);\r\n    }\r\n  },\r\n  methods: {\r\n    // 绑定@imgAdd event\r\n    $imgAdd(pos, $file) {\r\n      console.log($file);\r\n      // 第一步.将图片上传到服务器.\r\n      var formdata = new FormData();\r\n      formdata.append(\"image\", $file);\r\n\r\n      // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\r\n      // $vm.$img2Url 详情见本页末尾\r\n\r\n      uploadimg(formdata).then((url) => {\r\n        this.$refs.md.$img2Url(pos, baseUrl + url.imgSrc);\r\n      });\r\n    },\r\n    submit() {\r\n      let posttime = new Date().getTime();\r\n      if (!this.title || !this.menu || !this.des || !this.content) {\r\n        Message({ message: \"err\", type: \"error\" });\r\n      } else {\r\n        let data = {\r\n          title: this.title,\r\n          menu: this.menu,\r\n          des: this.des,\r\n          content: this.content,\r\n          posttime,\r\n        };\r\n        if (this.id) {\r\n          data.id = this.id;\r\n        }\r\n        postArticle(data).then((res) => {\r\n          console.log(res);\r\n          if (res.type == \"success\") {\r\n            Notification({\r\n              message: res.type,\r\n              type: res.type,\r\n              onClose: () => {\r\n                this.$router.push(\"/\");\r\n              },\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#markdown {\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  height: 100vh;\r\n  z-index: 3;\r\n  input {\r\n    background: #fff;\r\n  }\r\n  .editor {\r\n    flex: 1;\r\n  }\r\n}\r\n.articleTitle {\r\n  .form {\r\n    display: flex;\r\n    align-items: center;\r\n    background: #fff;\r\n    .title {\r\n      flex: 1;\r\n      margin-top: 10px;\r\n      margin-right: 20px;\r\n      height: 50px;\r\n      border: none;\r\n      border-bottom: solid 1px #ccc;\r\n      font-size: 24px;\r\n      font-weight: 700;\r\n      text-indent: 2em;\r\n      outline: none;\r\n    }\r\n    .menu {\r\n      input {\r\n        margin-left: 5px;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n    .submit {\r\n      margin: 0 20px;\r\n      padding: 5px;\r\n      color: #ccc;\r\n      border: solid 1px #ccc;\r\n      border-radius: 10px;\r\n      cursor: pointer;\r\n      box-sizing: border-box;\r\n      transition: 0.3s;\r\n      &:hover {\r\n        color: green;\r\n        border: solid 1px green;\r\n      }\r\n    }\r\n  }\r\n\r\n  textarea {\r\n    margin-top: 20px;\r\n    width: 100%;\r\n    border: none;\r\n    outline: none;\r\n    text-indent: 2em;\r\n    border-bottom: solid 1px #ccc;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mkfile.vue?vue&type=template&id=22cd672c&scoped=true&\"\nimport script from \"./Mkfile.vue?vue&type=script&lang=js&\"\nexport * from \"./Mkfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mkfile.vue?vue&type=style&index=0&id=22cd672c&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22cd672c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}